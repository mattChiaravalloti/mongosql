# Generated by create-tasks.  Do not manually edit!
# See mongosql-rs/evergreen/create-tasks/build.rs

tasks:

  - name: test-spec-query_6.0-standalone
    tags: [6.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 6.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/spec_tests/query_tests"
      - func: "run rust tests"
        vars:
          description: run spec query tests
          cargo_test_flags: --features=query --package=e2e-tests
    

  - name: test-index-usage_6.0-standalone
    tags: [6.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 6.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/index_usage"
      - func: "run rust tests"
        vars:
          description: run index usage tests
          cargo_test_flags: --features=index --package=e2e-tests
    

  - name: test-rust-e2e_6.0-standalone
    tags: [6.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 6.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/e2e_tests"
      - func: "run rust tests"
        vars:
          description: run rust e2e tests
          cargo_test_flags: --features=e2e --package=e2e-tests
    

  - name: test-rust-errors_6.0-standalone
    tags: [6.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 6.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/errors"
      - func: "run rust tests"
        vars:
          description: run rust error tests
          cargo_test_flags: --features=error --package=e2e-tests
    

  - name: test-schema-derivation_6.0-standalone
    tags: [6.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 6.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/schema_derivation_tests"
      - func: "run rust tests"
        vars:
          description: run schema derivation tests
          cargo_test_flags: --features=schema_derivation --package=e2e-tests
    

  - name: test-spec-query_7.0-standalone
    tags: [7.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 7.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/spec_tests/query_tests"
      - func: "run rust tests"
        vars:
          description: run spec query tests
          cargo_test_flags: --features=query --package=e2e-tests
    

  - name: test-index-usage_7.0-standalone
    tags: [7.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 7.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/index_usage"
      - func: "run rust tests"
        vars:
          description: run index usage tests
          cargo_test_flags: --features=index --package=e2e-tests
    

  - name: test-rust-e2e_7.0-standalone
    tags: [7.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 7.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/e2e_tests"
      - func: "run rust tests"
        vars:
          description: run rust e2e tests
          cargo_test_flags: --features=e2e --package=e2e-tests
    

  - name: test-rust-errors_7.0-standalone
    tags: [7.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 7.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/errors"
      - func: "run rust tests"
        vars:
          description: run rust error tests
          cargo_test_flags: --features=error --package=e2e-tests
    

  - name: test-schema-derivation_7.0-standalone
    tags: [7.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 7.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/schema_derivation_tests"
      - func: "run rust tests"
        vars:
          description: run schema derivation tests
          cargo_test_flags: --features=schema_derivation --package=e2e-tests
    

  - name: test-spec-query_8.0-standalone
    tags: [8.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 8.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/spec_tests/query_tests"
      - func: "run rust tests"
        vars:
          description: run spec query tests
          cargo_test_flags: --features=query --package=e2e-tests
    

  - name: test-index-usage_8.0-standalone
    tags: [8.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 8.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/index_usage"
      - func: "run rust tests"
        vars:
          description: run index usage tests
          cargo_test_flags: --features=index --package=e2e-tests
    

  - name: test-rust-e2e_8.0-standalone
    tags: [8.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 8.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/e2e_tests"
      - func: "run rust tests"
        vars:
          description: run rust e2e tests
          cargo_test_flags: --features=e2e --package=e2e-tests
    

  - name: test-rust-errors_8.0-standalone
    tags: [8.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 8.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/errors"
      - func: "run rust tests"
        vars:
          description: run rust error tests
          cargo_test_flags: --features=error --package=e2e-tests
    

  - name: test-schema-derivation_8.0-standalone
    tags: [8.0, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: 8.0
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/schema_derivation_tests"
      - func: "run rust tests"
        vars:
          description: run schema derivation tests
          cargo_test_flags: --features=schema_derivation --package=e2e-tests
    

  - name: test-spec-query_rapid-standalone
    tags: [rapid, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: rapid
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/spec_tests/query_tests"
      - func: "run rust tests"
        vars:
          description: run spec query tests
          cargo_test_flags: --features=query --package=e2e-tests
    

  - name: test-index-usage_rapid-standalone
    tags: [rapid, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: rapid
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/index_usage"
      - func: "run rust tests"
        vars:
          description: run index usage tests
          cargo_test_flags: --features=index --package=e2e-tests
    

  - name: test-rust-e2e_rapid-standalone
    tags: [rapid, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: rapid
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/e2e_tests"
      - func: "run rust tests"
        vars:
          description: run rust e2e tests
          cargo_test_flags: --features=e2e --package=e2e-tests
    

  - name: test-rust-errors_rapid-standalone
    tags: [rapid, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: rapid
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/errors"
      - func: "run rust tests"
        vars:
          description: run rust error tests
          cargo_test_flags: --features=error --package=e2e-tests
    

  - name: test-schema-derivation_rapid-standalone
    tags: [rapid, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: rapid
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/schema_derivation_tests"
      - func: "run rust tests"
        vars:
          description: run schema derivation tests
          cargo_test_flags: --features=schema_derivation --package=e2e-tests
    

  - name: test-spec-query_latest-standalone
    tags: [latest, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: latest
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/spec_tests/query_tests"
      - func: "run rust tests"
        vars:
          description: run spec query tests
          cargo_test_flags: --features=query --package=e2e-tests
    

  - name: test-index-usage_latest-standalone
    tags: [latest, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: latest
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/index_usage"
      - func: "run rust tests"
        vars:
          description: run index usage tests
          cargo_test_flags: --features=index --package=e2e-tests
    

  - name: test-rust-e2e_latest-standalone
    tags: [latest, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: latest
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/e2e_tests"
      - func: "run rust tests"
        vars:
          description: run rust e2e tests
          cargo_test_flags: --features=e2e --package=e2e-tests
    

  - name: test-rust-errors_latest-standalone
    tags: [latest, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: latest
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/errors"
      - func: "run rust tests"
        vars:
          description: run rust error tests
          cargo_test_flags: --features=error --package=e2e-tests
    

  - name: test-schema-derivation_latest-standalone
    tags: [latest, standalone]
    commands:
      - func: "bootstrap mongo-orchestration"
        vars:
          MONGODB_VERSION: latest
          TOPOLOGY: server
      - func: "install rust toolchain"
      - func: "run data loader"
        vars:
          working_dir: ${common_test_infra_dir}
          data_loader_args: "--mongod-uri mongodb://localhost:27017 -d ../testdata/schema_derivation_tests"
      - func: "run rust tests"
        vars:
          description: run schema derivation tests
          cargo_test_flags: --features=schema_derivation --package=e2e-tests
    
